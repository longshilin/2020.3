<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Asynchronous shader compilation in the Unity Editor - Unity 手册">
<title>Asynchronous shader compilation in the Unity Editor - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2020.3/uploads/Main/cyan_dummy_shaders.png">
<meta name="description" content="Asynchronous shader compilation is an Editor-only feature that can speed up your workflow when you have complex Unity shaders with lots of shader variants.">
<meta property="og:description" content="Asynchronous shader compilation is an Editor-only feature that can speed up your workflow when you have complex Unity shaders with lots of shader variants.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'AsynchronousShaderCompilation';
      if(!page) page = 'index';
      var version = '2020.3';
      var docs_versions = [{version: '2021.1',version_string: '2021.1',supported: true},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: true},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2020.3/Manual/AsynchronousShaderCompilation.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2020.3/Manual/AsynchronousShaderCompilation.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2020.3/Manual/AsynchronousShaderCompilation.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2020.3/Manual/AsynchronousShaderCompilation.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2020.3/Manual/AsynchronousShaderCompilation.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2020.3/Manual/AsynchronousShaderCompilation.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2020.3/Manual/AsynchronousShaderCompilation.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2020.3/Documentation/Manual/AsynchronousShaderCompilation.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2020.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/AsynchronousShaderCompilation.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/AsynchronousShaderCompilation.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/AsynchronousShaderCompilation.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/AsynchronousShaderCompilation.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/AsynchronousShaderCompilation.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/AsynchronousShaderCompilation.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/AsynchronousShaderCompilation.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/AsynchronousShaderCompilation.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/AsynchronousShaderCompilation.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/AsynchronousShaderCompilation.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/AsynchronousShaderCompilation.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/AsynchronousShaderCompilation.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/AsynchronousShaderCompilation.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/AsynchronousShaderCompilation.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/AsynchronousShaderCompilation.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/AsynchronousShaderCompilation.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/AsynchronousShaderCompilation.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2020.3/Documentation/Manual/AsynchronousShaderCompilation.html">English</a></li>
<li><a data-lang="cn" href="/cn/2020.3/Manual/AsynchronousShaderCompilation.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2020.3/Manual/AsynchronousShaderCompilation.html">日本語</a></li>
<li><a data-lang="es" href="/es/2020.3/Manual/AsynchronousShaderCompilation.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2020.3/Manual/AsynchronousShaderCompilation.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2020.3/Manual/AsynchronousShaderCompilation.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2020.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/AsynchronousShaderCompilation.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/AsynchronousShaderCompilation.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/AsynchronousShaderCompilation.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/AsynchronousShaderCompilation.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/AsynchronousShaderCompilation.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/AsynchronousShaderCompilation.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/AsynchronousShaderCompilation.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/AsynchronousShaderCompilation.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/AsynchronousShaderCompilation.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/AsynchronousShaderCompilation.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/AsynchronousShaderCompilation.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/AsynchronousShaderCompilation.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/AsynchronousShaderCompilation.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/AsynchronousShaderCompilation.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/AsynchronousShaderCompilation.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/AsynchronousShaderCompilation.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/AsynchronousShaderCompilation.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2020.3 (LTS)</a></li>
<li><a href="Graphics.html">图形</a></li>
<li><a href="Shaders.html">网格、材质、着色器和纹理</a></li>
<li><a href="ShadersOverview.html">编写着色器</a></li>
<li><a href="SL-Reference.html">着色器参考</a></li>
<li><a href="SL-AdvancedTopics.html">高级 ShaderLab 主题</a></li>
<li>Asynchronous shader compilation in the Unity Editor</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="shaders-compilation.html"></a></span><div class="tip">Shader compilation</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="OptimizingShaderLoadTime.html"></a></span><div class="tip">优化着色器变体</div>
</div>
</div></div>
<h1>Asynchronous shader compilation in the Unity Editor</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Asynchronous shader compilation is an Editor-only feature that can speed up your workflow when you have complex Unity shaders with lots of shader variants.</p>

<p>本页包含以下信息：</p>

<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#how-it-works">How asynchronous shader compilation works</a></li>
<li><a href="#enabling-disabling-project">Enabling and disabling asynchronous shader compilation for your project</a></li>
<li><a href="#enabling-disabling-calls">Enabling and disabling asynchronous shader compilation for specific rendering calls</a></li>
<li><a href="#advanced-rendering-in-the-editor">Disabling asynchronous shader compilation for a specific Unity shader</a></li>
<li><a href="#detecting-compilation">Detecting asynchronous shader compilation in the Unity Editor</a></li>
<li><a href="#advanced-rendering-in-the-editor">Advanced rendering and asynchronous shader compilation</a></li>
<li><a href="#using-it-in-custom-editor-tools">Custom Editor tools and asynchronous shader compilation</a></li>
</ul>

<p><a name="overview"></a></p>

<h2>概述</h2>

<p>Unity shaders can contain of hundreds or thousands of shader variants. If the Editor compiled all variants when loading a Unity shader, the import process would be very slow. Instead, the Editor compiles shader variants on-demand, the first time it encounters them.</p>

<p>Compiling these shader variants can cause the Editor to stall for milliseconds or even seconds, depending on the graphics API and the complexity of the Unity shader. To avoid these stalls, you can use <strong>Asynchronous Shader Compilation</strong> to compile the shader variants in the background, and use placeholder Unity shaders in the meantime.</p>

<p><a name="how-it-works"></a></p>

<h2>How asynchronous shader compilation works</h2>

<p>Asynchronous shader compilation works like this:</p>

<ol>
<li>When the Editor first encounters an uncompiled shader variant, it adds the shader variant to a compilation queue on a job thread. The progress bar in the bottom right corner of the Editor shows the status of the compilation queue.</li>
<li>While the shader variant is loading, Editor renders the geometry with a placeholder Unity shader, which appears as a plain cyan color.</li>
<li>When the Editor has finished compiling the shader variant, it renders the geometry using the shader variant.</li>
</ol>

<p>The feature does not have any effect on the standalone Player, because the Editor compiles all the Shader Variants needed by the Player during the build process. </p>

<figure>
<img src="../uploads/Main/cyan_dummy_shaders.png" alt="Unity renders shader variants that are still compiling with a cyan dummy Shader until compilation has finished. The bottom right progress bar indicates the compilation queue progress.">
<figcaption>Unity renders shader variants that are still compiling with a cyan dummy Shader until compilation has finished. The bottom right progress bar indicates the compilation queue progress.</figcaption>
</figure>

<h3>异常</h3>

<p>The following exceptions apply:</p>

<ul>
<li>If you draw geometry using <a href="../ScriptReference/Graphics.DrawProcedural.html"><code>DrawProcedural</code></a> or <a href="../ScriptReference/Rendering.CommandBuffer.DrawProcedural.html"><code>CommandBuffer.DrawProcedural</code></a>, the Editor doesn’t use a placeholder Unity shader. Instead, the Editor just skips rendering this geometry until it has compiled the shader variant.</li>
<li>The Unity Editor does not use asynchronous shader compilation with Blit operations. This is to guarantee correct output in the most common use cases.</li>
</ul>

<p><a name="enabling-disabling-project"></a></p>

<h2>Enabling and disabling asynchronous shader compilation for your project</h2>

<p>Asynchronous shader compilation is enabled by default.</p>

<p>To enbale or disable asynchronous shader compilation:</p>

<ol>
<li>Go to <strong>Edit &gt; Project Settings.. &gt; Editor</strong>.</li>
<li>At the bottom of the Editor settings, under <strong>Shader Compilation</strong>, check or uncheck the <strong>Asynchronous Shader Compilation</strong> checkbox.</li>
</ol>

<figure>
<img src="../uploads/Main/asynchronous_shader_compilation_ui.png" alt="可以在 Project Settings &amp;gt; Editor &amp;gt; Shader Compilation 下找到 Asynchronous Shader Compilation 的复选框。">
<figcaption>可以在 <strong>Project Settings &gt; Editor &gt; Shader Compilation</strong> 下找到 <strong>Asynchronous Shader Compilation</strong> 的复选框。</figcaption>
</figure>

<p><strong>Note:</strong> Enabling and disabling asynchronous shader compilation in this way affects only the Scene and Game views by default. If you want to use it in other scenarios, you can control this via scripts. See [Using asynchronous Shader compilation in <a href="#using-it-in-custom-editor-tools">custom Editor tools</a>.</p>

<p><a name="enabling-disabling-calls"></a></p>

<h2>Enabling and disabling asynchronous shader compilation for specific rendering calls</h2>

<p>You can enable or disable asynchronous shader compilation for specific rendering commands in your C# scripts. You might use this </p>

<p>The following instructions show you how to enable or disable the feature in an immediate scope, and a CommandBuffer scope.</p>

<h4>在直接作用域中</h4>

<p>In an <em>immediate scope</em>, you can use <a href="../ScriptReference/ShaderUtil-allowAsyncCompilation.html"><code>ShaderUtil.allowAsyncCompilation;</code></a>. </p>

<p>To do this:</p>

<ol>
<li>Store the current state of <code>ShaderUtil.allowAsyncCompilation</code> in a variable.</li>
<li>Before you call the rendering commands, set <code>ShaderUtil.allowAsyncCompilation</code> to <code>false</code>.</li>
<li>Call the rendering commands.</li>
<li>After calling the rendering commands, restore <code>ShaderUtil.allowAsyncCompilation</code> back to its previous state.</li>
</ol>

<p>下面是一个伪代码示例：</p>

<pre><code>// Store the current state
bool oldState = ShaderUtil.allowAsyncCompilation;

// Disable async compilation
ShaderUtil.allowAsyncCompilation = false;

// Enter your rendering code that should never use the placeholder Unity shader
Graphics.DrawMesh(...);

// Restore the old state
ShaderUtil.allowAsyncCompilation = oldState;
</code></pre>

<h4>在 CommandBuffer 作用域中</h4>

<p>In a <a href="../ScriptReference/Rendering.CommandBuffer.html"><em>CommandBuffer</em></a> scope, you can use <a href="../ScriptReference/ShaderUtil.SetAsyncCompilation.html"><code>ShaderUtil.SetAsyncCompilation</code></a> and <a href="../ScriptReference/ShaderUtil.RestoreAsyncCompilation.html"><code>ShaderUtil.RestoreAsyncCompilation</code></a>.</p>

<ol>
<li>Immediately before you call the rendering commands, call <code>ShaderUtil.SetAsyncCompilation</code>, and set it to <code>false</code>. Subsequent commands in the CommandBuffer won’t allow asynchronous compilation.</li>
<li>Add the rendering commands to the CommandBuffer.</li>
<li>After the rendering commands, call <a href="../ScriptReference/ShaderUtil.RestoreAsyncCompilation.html"><code>Shader.Util.RestoreAsyncCompilation</code></a> to restore the state of asynchronous shader compilation.</li>
</ol>

<p>Here is an example:</p>

<pre><code class="CommandBuffer cmd = new CommandBuffer();">
// Disable async compilation for subsequent commands
ShaderUtil.SetAsyncCompilation(cmd, false);

/// Enter your rendering commands that should never use the placeholder Unity shader
cmd.DrawMesh(...);

// Restore the old state
ShaderUtil.RestoreAsyncCompilation(cmd);
</code></pre>

<h2>Disabling asynchronous compilation for specific Unity shaders</h2>

<p>You can disable asynchronous shader compilation for specific Unity shaders by forcing the Editor to always compile them synchronously. This is a good option for data generating Unity shaders that are always present at the start of your rendering, and which are relatively quick to compile. You would most likely need this if you are performing <a href="#advanced-rendering-in-the-editor">advanced rendering</a>.</p>

<p>To force synchronous compilation for a Unity shader, add the <code>#pragma editor_sync_compilation</code> <a href="SL-ShaderPrograms.html">directive</a> to your Unity shader source code.</p>

<p><strong>Note:</strong> If you force synchronous compilation for complex Unity shaders that encounter new shader variants in the middle of your rendering, this can stall rendering in the Editor.</p>

<p><a name="detecting-compilation"></a></p>

<h2>Detecting asynchronous shader compilation</h2>

<p>You can use C# APIs to monitor the state of asynchronous shader compilation, and perform operations when this state changes.</p>

<p>This is most likely useful in <a href="#advanced-rendering-in-the-editor">advanced rendering</a>; if the placeholder Unity shader pollutes your generated data, you can discard the polluted data and regenerate a new set with the correct shader variants.</p>

<p>If you already know which material you are interested in, you can use <code>ShaderUtil.IsPassCompiled</code> to check the compilation status of the shader variant. When the status changes <em>Uncompiled</em> to <em>Compiled</em>, compilation is complete.</p>

<p>If you do not know which material you are interested in, or if you are interested in more than one material, you can use <code>ShaderUtil.anythingCompiling</code> to detect whether Unity is compiling any shader variants asynchronously. When this changes from <code>true</code> to <code>false</code>, all current compilation is complete.</p>

<p><a name="advanced-rendering-in-the-editor"></a></p>

<h2>Editor 中的高级渲染</h2>

<p>Advanced rendering solutions rely on generating data once and reusing it in later frames. If the Editor uses a placeholder Unity shader during this process, it might pollute the generated data. If this happens, you can see the cyan color or other rendering artifacts in your scene, even after the shader variants have finished compiling. </p>

<p>To avoid this, you can:</p>

<ul>
<li><a href="#enabling-disabling-project">Disable asynchronous shader compilation completely for your project</a></li>
<li><a href="#enabling-disabling-calls">Disable asynchronous shader compilation for specific rendering calls</a></li>
<li><a href="#advanced-rendering-in-the-editor">Disable asynchronous shader compilation for a specific Unity shader</a></li>
<li>
<a href="#detecting-compilation">Detect when the source of the data pollution has finished compiling</a>, and then re-generate the data.</li>
</ul>

<p><a name="using-it-in-custom-editor-tools"></a></p>

<h2>Custom Editor tools and asynchronous shader compilation</h2>

<p>默认情况下，异步着色器编译功能在 Game 视图和 Scene 视图中有效。如果要在自定义 Editor 工具中使用该功能，可以通过 C# 为自定义工具启用该功能。</p>

<p>To do this, you can <a href="#enabling-disabling-calls">enable asynchronous shader compilation for specific rendering calls</a>.</p>

<h3>自定义编译时间渲染</h3>

<p>You can make your custom tools draw something other than the placeholder Unity shader for each material. This way, you can avoid rendering in plain cyan, and instead draw something else while the shader variant compiles. </p>

<p>To check if a specific shader variant has compiled, see <a href="#detecting-compilation">Detecting asynchronous shader compilation</a>.</p>

<p>To trigger compilation manually, you can use <a href="../ScriptReference/ShaderUtil.CompilePass.html"><code>ShaderUtil.CompilePass</code></a>. This way, you can avoid rendering with the cyan placeholder, and draw something else while the shader variant compiles. </p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="shaders-compilation.html"></a></span><div class="tip">Shader compilation</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="OptimizingShaderLoadTime.html"></a></span><div class="tip">优化着色器变体</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">版权所有 © 2020 Unity Technologies. Publication 2020.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
