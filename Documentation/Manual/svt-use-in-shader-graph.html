<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Using Streaming Virtual Texturing in Shader Graph - Unity 手册">
<title>Using Streaming Virtual Texturing in Shader Graph - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2020.3/uploads/Main/svt-use-in-shader-graph01.png">
<meta name="description" content="You can use Streaming Virtual Texturing (SVT) with shaders you create in Shader Graph. Before you begin, you must enable Virtual Texturing in your project. The built-in High Definition Render Pipeline shaders (such as Lit and Unlit) don&amp;#8217;t support SVT.">
<meta property="og:description" content="You can use Streaming Virtual Texturing (SVT) with shaders you create in Shader Graph. Before you begin, you must enable Virtual Texturing in your project. The built-in High Definition Render Pipeline shaders (such as Lit and Unlit) don&amp;#8217;t support SVT.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'svt-use-in-shader-graph';
      if(!page) page = 'index';
      var version = '2020.3';
      var docs_versions = [{version: '2021.1',version_string: '2021.1',supported: true},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: true},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2020.3/Manual/svt-use-in-shader-graph.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2020.3/Manual/svt-use-in-shader-graph.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2020.3/Manual/svt-use-in-shader-graph.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2020.3/Manual/svt-use-in-shader-graph.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2020.3/Manual/svt-use-in-shader-graph.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2020.3/Manual/svt-use-in-shader-graph.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2020.3/Manual/svt-use-in-shader-graph.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2020.3/Documentation/Manual/svt-use-in-shader-graph.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2020.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/svt-use-in-shader-graph.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/svt-use-in-shader-graph.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/svt-use-in-shader-graph.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/svt-use-in-shader-graph.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/svt-use-in-shader-graph.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/svt-use-in-shader-graph.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/svt-use-in-shader-graph.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/svt-use-in-shader-graph.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/svt-use-in-shader-graph.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/svt-use-in-shader-graph.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/svt-use-in-shader-graph.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/svt-use-in-shader-graph.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/svt-use-in-shader-graph.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/svt-use-in-shader-graph.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/svt-use-in-shader-graph.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/svt-use-in-shader-graph.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/svt-use-in-shader-graph.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2020.3/Documentation/Manual/svt-use-in-shader-graph.html">English</a></li>
<li><a data-lang="cn" href="/cn/2020.3/Manual/svt-use-in-shader-graph.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2020.3/Manual/svt-use-in-shader-graph.html">日本語</a></li>
<li><a data-lang="es" href="/es/2020.3/Manual/svt-use-in-shader-graph.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2020.3/Manual/svt-use-in-shader-graph.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2020.3/Manual/svt-use-in-shader-graph.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2020.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/svt-use-in-shader-graph.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/svt-use-in-shader-graph.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/svt-use-in-shader-graph.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/svt-use-in-shader-graph.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/svt-use-in-shader-graph.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/svt-use-in-shader-graph.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/svt-use-in-shader-graph.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/svt-use-in-shader-graph.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/svt-use-in-shader-graph.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/svt-use-in-shader-graph.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/svt-use-in-shader-graph.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/svt-use-in-shader-graph.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/svt-use-in-shader-graph.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/svt-use-in-shader-graph.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/svt-use-in-shader-graph.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/svt-use-in-shader-graph.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/svt-use-in-shader-graph.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2020.3 (LTS)</a></li>
<li><a href="Graphics.html">图形</a></li>
<li>高级渲染功能</li>
<li><a href="svt-streaming-virtual-texturing.html">Streaming Virtual Texturing</a></li>
<li>Using Streaming Virtual Texturing in Shader Graph</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="svt-enable-in-project.html"></a></span><div class="tip">Enabling Streaming Virtual Texturing in your project</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="svt-cache-management.html"></a></span><div class="tip">Cache Management for Virtual Texturing</div>
</div>
</div></div>
<h1>Using Streaming Virtual Texturing in Shader Graph</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>You can use Streaming Virtual Texturing (SVT) with shaders you create in <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@latest">Shader Graph</a>. Before you begin, you must <a href="svt-enable-in-project.html">enable Virtual Texturing in your project</a>. The built-in <a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@latest">High Definition Render Pipeline</a> shaders (such as Lit and Unlit) don’t support SVT.</p>

<p>To use SVT to stream a texture, you must add the texture to a <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@latest/index.html?subfolder=/manual/Property-Types.html%23virtual-texture">Virtual Texture Property</a>. A Virtual Texture Property defines a stack of related textures. To sample these textures, you connect the Virtual Texture Property to a <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@latest/index.html?subfolder=/manual/Sample-Virtual-Texture-Node.html">Sample Virtual Texture node</a>. The Sample Virtual Texture node takes one UV coordinate as the input, and uses that UV coordinate to sample all of the textures.</p>

<p>You should combine textures into the same Virtual Texture Property where possible. This is because it’s more efficient to sample multiple textures that are part of the same Virtual Texture Property than to sample multiple Virtual Texture Properties.</p>

<p>When you use a Sample Virtual Texture node in the fragment stage, SVT automatically streams in texture tiles based on the UVs it sampled. For this to work, the Sample Virtual Texture node outputs the tile ID it reads from into a render target. To turn this off, open the node settings and disable <strong>Automatic Streaming</strong>. For more information, see <a href="svt-how-it-works.html">How Streaming Virtual Texturing works</a>.</p>

<p>To use a Sample Virtual Texture node in the vertex stage, you first need to disable <strong>Automatic Streaming</strong> on the Sample Virtual Texture node, and then select the <strong>Lod Level</strong> mode. You must then use a script to manually request that SVT loads the tiles. To do this, use the <a href="../ScriptReference/Rendering.VirtualTexturing.Streaming.RequestRegion.html"><code>VirtualTexturing.Streaming.RequestRegion</code></a> method as follows:</p>

<pre><code>VirtualTexturing.Streaming.RequestRegion(Material, Stack ID, Rect, mipmap, numMips)
</code></pre>

<p>You can use this method to load any tiles that aren’t yet visible, which allows you to do things like build a prefetching system. You need to call this method every frame, otherwise the system assumes that the tiles are no longer necessary, and potentially evicts them when it streams other tiles.</p>

<figure>
<img src="../uploads/Main/svt-use-in-shader-graph01.png" alt="This example shows a Virtual Texture Property connected to a Sample Virtual Texture node in Shader Graph.">
<figcaption>This example shows a Virtual Texture Property connected to a Sample Virtual Texture node in Shader Graph.</figcaption>
</figure>

<h2>Shader Graph compatibility</h2>

<ul>
<li><p>You must assign all texture slots of the Virtual Texture Property in Shader Graph.</p></li>
<li><p>SVT copies each unique combination of textures you assign to a Virtual Texture Property to a unique section of the streaming virtual texture. Therefore, if you use many different combinations of textures in a Virtual Texture Property, it might increase your project build size because each combination is stored separately.</p></li>
<li>
<p>There are some limitations when you use the Sample Virtual Texture node in Shader Graph. </p>

<ul>
<li>You cannot use the Sample Virtual Texture node in a Decal graph or on Transparent shaders. If you use the Sample Virtual Texture node in either of these ways, the node uses standard 2D texture sampling instead.</li>
<li>Automatic virtual streaming doesn’t work when you use it in the vertex stage of a shader. By default, the Sample Virtual Texture node doesn’t connect to vertex slots in a Shader Graph. To sample a virtual texture stack in the vertex stage, you must set up manual streaming for that texture. To do this, set the <strong>Lod Mode</strong> to <strong>Lod Level</strong>, and disable <strong>Automatic Streaming</strong> in the node settings. You also need to write a C# script that drives data requests for this texture. For more information, see <a href="../ScriptReference/Rendering.VirtualTexturing.Streaming.RequestRegion.html"><code>VirtualTexturing.Streaming.RequestRegion</code></a>.</li>
<li>Some render pipeline or graph settings might be incompatible with virtual texture streaming. If the Sample Virtual Texture node doesn’t work with the current configuration, Shader Graph displays a warning message in the node settings, and the node uses standard 2D texture sampling instead.</li>
</ul>
</li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="svt-enable-in-project.html"></a></span><div class="tip">Enabling Streaming Virtual Texturing in your project</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="svt-cache-management.html"></a></span><div class="tip">Cache Management for Virtual Texturing</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">版权所有 © 2020 Unity Technologies. Publication 2020.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
