<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Using WebGL templates - Unity 手册">
<title>Using WebGL templates - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2020.3/uploads/Main/WebGLResolutionandPresentationWindow.png">
<meta name="description" content="This page requires prior knowledge of JavaScript concepts and terminology.">
<meta property="og:description" content="This page requires prior knowledge of JavaScript concepts and terminology.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'webgl-templates';
      if(!page) page = 'index';
      var version = '2020.3';
      var docs_versions = [{version: '2021.1',version_string: '2021.1',supported: true},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: true},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2020.3/Manual/webgl-templates.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2020.3/Manual/webgl-templates.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2020.3/Manual/webgl-templates.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2020.3/Manual/webgl-templates.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2020.3/Manual/webgl-templates.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2020.3/Manual/webgl-templates.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2020.3/Manual/webgl-templates.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2020.3/Documentation/Manual/webgl-templates.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2020.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/webgl-templates.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/webgl-templates.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/webgl-templates.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/webgl-templates.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/webgl-templates.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/webgl-templates.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/webgl-templates.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/webgl-templates.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/webgl-templates.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/webgl-templates.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/webgl-templates.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/webgl-templates.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/webgl-templates.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/webgl-templates.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/webgl-templates.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/webgl-templates.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/webgl-templates.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2020.3/Documentation/Manual/webgl-templates.html">English</a></li>
<li><a data-lang="cn" href="/cn/2020.3/Manual/webgl-templates.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2020.3/Manual/webgl-templates.html">日本語</a></li>
<li><a data-lang="es" href="/es/2020.3/Manual/webgl-templates.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2020.3/Manual/webgl-templates.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2020.3/Manual/webgl-templates.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2020.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/webgl-templates.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/webgl-templates.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/webgl-templates.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/webgl-templates.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/webgl-templates.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/webgl-templates.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/webgl-templates.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/webgl-templates.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/webgl-templates.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/webgl-templates.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/webgl-templates.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/webgl-templates.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/webgl-templates.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/webgl-templates.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/webgl-templates.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/webgl-templates.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/webgl-templates.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2020.3 (LTS)</a></li>
<li><a href="PlatformSpecific.html">平台开发</a></li>
<li><a href="webgl.html">WebGL</a></li>
<li><a href="webgl-gettingstarted.html">WebGL 开发入门</a></li>
<li>Using WebGL templates</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="webgl-embeddedresources.html"></a></span><div class="tip">WebGL 中的嵌入式资源</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="webgl-cursorfullscreen.html"></a></span><div class="tip">WebGL 中的光标锁定和全屏模式</div>
</div>
</div></div>
<h1>Using WebGL templates</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>This page requires prior knowledge of JavaScript concepts and terminology.</p>

<p>When you build a WebGL project, Unity embeds the Player in an HTML page so a browser can open it. A WebGL template is a configuration setting that allows you to control what this HTML page looks like, so that you can test, demonstrate, and preview your WebGL application in the HTML page.
To access WebGL templates, go to <a href="class-PlayerSettings.html">Player settings</a> (menu: <strong>Edit</strong> &gt; <strong>Project Settings</strong> &gt; <strong>Player</strong>), set the platform-specific settings to WebGL, and open <strong>Resolution and Presentation</strong>.</p>

<figure>
<img src="../uploads/Main/WebGLResolutionandPresentationWindow.png" alt="Image of Player Resolution and Presentation window. ">
<figcaption>Image of Player Resolution and Presentation window. </figcaption>
</figure>

<p>By default, the WebGL Template setting has two options:</p>

<ul>
<li>Default: A white page with a loading bar on a grey canvas.</li>
<li>Minimal: A minimal WebGL template with only the necessary boilerplate code to run the WebGL content.</li>
</ul>

<p>These built-in HTML pages are useful for testing and demonstrating a minimal Player.</p>

<p>You can also use JavaScript to build and supply your own WebGL templates to host the Player. This is useful for production purposes, so that you can preview the Player hosted in the page where it will eventually be deployed. For example, if the Unity Player content interacts with other elements in the page via the external call interface, you should test it with a page that contains those interacting elements.</p>

<h2>Add a WebGL template</h2>

<p>To add custom templates to your project, navigate to your Project’s <code>Assets</code> folder and create a folder called <code>WebGLTemplates</code>. Each template is a subfolder within the <code>WebGLTemplates</code> folder. Each template subfolder contains an <code>index.html</code> file along with any other resources the page needs, such as images or stylesheets.</p>

<p>The easiest way to create a new custom WebGL template is to make a copy of the built-in Default or Minimal templates. These are stored in corresponding subfolders under <code>&lt;Unity Installation&gt;/PlaybackEngines/WebGLSupport/BuildTools/WebGLTemplates/</code>. Every Unity Project includes these by default. Copy one and place it in your own <code>Project/Assets/WebGLTemplates</code> folder, and rename it to something meaningful so you can identify your template later.</p>

<p>Templates in your Project’s <code>WebGLTemplates</code> folder appear in the Unity Player Settings’ WebGL Template setting. The name of the template is the same as its folder. To give this option a thumbnail image for easy reference, add a 128x128-pixel image to the template folder and name it <code>thumbnail.png</code>.</p>

<h2>Template variables, macros, and conditional directives</h2>

<p>During the build process, Unity pre-processes template files and evaluates all macros and conditional directives included in those files. As part of this process, Unity finds and replaces all macro declarations with the values the Editor supplies. Unity automatically pre-processes all .html, .php, .css, .js and .json files in the template folder.</p>

<h3>Internal preprocessor variables</h3>

<p>The following internal preprocessor variables refer to data in the Project, and Unity assigns value to them at build time according to the values the Editor supplies. Javascript macros and conditional directives can use these internal preprocessor variables.</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Variable</strong></th>
	<th style="text-align:left;"><strong>类型</strong></th>
	<th style="text-align:left;"><strong>描述</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">COMPANY_NAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">The Company Name defined in the Player Settings.</td>
</tr>
<tr>
	<td style="text-align:left;">PRODUCT_NAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">The Product Name defined in the Player Settings.</td>
</tr>
<tr>
	<td style="text-align:left;">PRODUCT_VERSION</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">The Version defined in the Player Settings.</td>
</tr>
<tr>
	<td style="text-align:left;">WIDTH</td>
	<td style="text-align:left;">Integer</td>
	<td style="text-align:left;">The Default Canvas Width defined in the Player Settings &gt; Resolution and Presentation.</td>
</tr>
<tr>
	<td style="text-align:left;">HEIGHT</td>
	<td style="text-align:left;">Integer</td>
	<td style="text-align:left;">The Default Canvas Height in the Player Settings &gt; Resolution and Presentation.</td>
</tr>
<tr>
	<td style="text-align:left;">SPLASH_SCREEN_STYLE</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the “Dark” value when Splash Style Player Settings &gt; Splash Image is set to Light on Dark, otherwise it is set to the “Light” value.</td>
</tr>
<tr>
	<td style="text-align:left;">BACKGROUND_COLOR</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">Represents the Background Color defined in a form of a hex triplet.</td>
</tr>
<tr>
	<td style="text-align:left;">UNITY_VERSION</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">The Unity version.</td>
</tr>
<tr>
	<td style="text-align:left;">DEVELOPMENT_PLAYER</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">This is set to true if the Development Build option is enabled.</td>
</tr>
<tr>
	<td style="text-align:left;">DECOMPRESSION_FALLBACK</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to “Gzip” or “Brotli”, depending on which compression method is used and which decompressor is included in the build. If neither is included, the variable is set to an empty string.</td>
</tr>
<tr>
	<td style="text-align:left;">TOTAL_MEMORY</td>
	<td style="text-align:left;">Integer</td>
	<td style="text-align:left;">The initial size of the memory heap in bytes.</td>
</tr>
<tr>
	<td style="text-align:left;">USE_WASM</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">This is set to true if the current build is a WebAssembly build.</td>
</tr>
<tr>
	<td style="text-align:left;">USE_THREADS</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">This is set to true if the current build uses threads.</td>
</tr>
<tr>
	<td style="text-align:left;">USE_WEBGL_1_0</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">This is set to true if the current build supports the WebGL1.0 graphics API.</td>
</tr>
<tr>
	<td style="text-align:left;">USE_WEBGL_2_0</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">This is set to true if the current build supports the WebGL2.0 graphics API.</td>
</tr>
<tr>
	<td style="text-align:left;">USE_DATA_CACHING</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">This is set to true if the current build uses indexedDB caching for the downloaded files.</td>
</tr>
<tr>
	<td style="text-align:left;">LOADER_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the build loader script.</td>
</tr>
<tr>
	<td style="text-align:left;">DATA_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the main data file.</td>
</tr>
<tr>
	<td style="text-align:left;">FRAMEWORK_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the build framework script.</td>
</tr>
<tr>
	<td style="text-align:left;">CODE_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the WebAssembly module when the current build is a WebAssembly build, otherwise it is set to the filename of the <code>asm.js</code> module.</td>
</tr>
<tr>
	<td style="text-align:left;">MEMORY_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the memory file when memory is stored in an external file, otherwise it is set to an empty string.</td>
</tr>
<tr>
	<td style="text-align:left;">SYMBOLS_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the JSON file containing debug symbols when the current build is using debug symbols, otherwise it is set to an empty string.</td>
</tr>
<tr>
	<td style="text-align:left;">BACKGROUND_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the background image when the background image is selected in the Player Settings &gt; Splash Image, otherwise it is set to an empty string.</td>
</tr>
</tbody>
</table>

<h2>JavaScript macros</h2>

<p>JavaScript macros are blocks of JavaScript code in template files, surrounded by three sets of curly brackets. This JavaScript code can use the internal preprocessor variables listed above. These variables are assigned at build time according to the values the Editor supplies. During the build, the preprocessor evaluates all macros and replaces them with the output of the variable.</p>

<p>You can use JavaScript macros to preprocess values supplied by the Editor. These macros can be as complex as you like. They can include multiple operators, loops, functions, and any other JavaScript constructs.</p>

<p>The following example line is from the <code>index.html</code> file used in the Default template:</p>

<p><code>&lt;div id="unity-build-title"&gt;{{{ PRODUCT_NAME }}}&lt;/div&gt;</code></p>

<p>If the value of the <strong>Product Name</strong> in the Player Settings is set to “My WebGL Game”, the internal preprocessor variable PRODUCT_NAME has the value “My WebGL Game”. In the output <code>index.html</code> file, the line appears as:</p>

<p><code>&lt;div id="unity-build-title"&gt;My WebGL Game&lt;/div&gt;</code></p>

<p>Below is a more complex example from the same <code>index.html</code> template file:</p>

<p><code>canvas.style.background = "url('" + buildUrl + "/{{{ BACKGROUND_FILENAME.replace(/'/g, '%27') }}}') center / cover";</code></p>

<p>If the target build folder is called <code>Let’s try WebGL</code>, and a background image is selected in the Player Settings, the internal preprocessor variable BACKGROUND_FILENAME has the value “Let’s try WebGL.jpg”. In the output <code>index.html</code> file, the line changes into:</p>

<p><code>canvas.style.background = "url('" + buildUrl + "/’Let%27s try WebGL.jpg') center / cover";</code></p>

<h2>Conditional directives</h2>

<p>Conditional directives <strong>#if</strong>, <strong>#else</strong>, and <strong>#endif</strong> control whether Unity includes a specific portion of the preprocessed file in the output file, or discards it for the current build.</p>

<p>Code that starts with an <strong>#if</strong> directive and ends with an <strong>#endif</strong> directive is called a conditional group. Conditional groups can also include <strong>#else</strong> directives. Unity evaluates the expression written after the <strong>#if</strong> as a JavaScript expression. If this expression has a truthy value (that is, a value that translates to true when evaluated in a Boolean context) Unity keeps the line group immediately following the <strong>#if</strong> directive in the output file. If the <strong>#if</strong> expression is false, and an <strong>#else</strong> directive is included in the conditional group, Unity keeps the line group immediately following the <strong>#else</strong> directive in the output.
An example of a conditional group is as follows:</p>

<pre><code class="lang-js">#if EXPRESSION
  // this block is included in the output if EXPRESSION has a truthy value
#else
  // this block is included in the output otherwise
#endif
</code></pre>

<p>Evaluated JavaScript expressions can include brackets, logical operators and other JavaScript constructs. Conditional directives can be nested.</p>

<h2>Custom user variables</h2>

<p>When you select a WebGL template, Unity parses the template and looks for Javascript macros and conditional directives.
JavaScript variables are treated as custom user variables if they meet all of the following criteria:</p>

<ul>
<li>They are used inside JavaScript macros and conditional directives.</li>
<li>They are not declared in the template code.</li>
<li>They are not internal preprocessor variables.</li>
</ul>

<p>Unity automatically adds these custom user variables to the <strong>Resolution and Presentation</strong> section in the <strong>Player Settings</strong> window.</p>

<p>As an example, if you want to control the title of the generated <code>index.html</code> page directly from the <strong>Player Settings</strong> window, you first need to modify the <code>&amp;lt;title&amp;gt;</code> line of the <code>index.html</code> in your custom template, like this:
<code>
&lt;title&gt;{{{ PAGE_TITLE }}}&lt;/title&gt;
</code>
After you’ve done this, re-select your custom template. This parses the template again, and you should find a <strong>Page Title</strong> field in the <strong>Resolution and Presentation</strong> &gt; <strong>WebGL Template</strong> section of the <strong>Player Settings window</strong>.</p>

<figure>
<img src="../uploads/Main/WebGLResolutionandPresentationCustomTemplate.png" alt="Image of Resolution and Presentation window with custom template">
<figcaption>Image of Resolution and Presentation window with custom template</figcaption>
</figure>

<p>When you enter text into this field and build your Project, the custom variable PAGE_TITLE used in the template macro automatically becomes the text in the <strong>Page Title</strong> field.</p>

<p>If you would like to use custom integer or float variables in your macros, use <code>parseInt()</code> or <code>parseFloat()</code> JavaScript functions in your macros to preprocess string values supplied by the Editor. This is because custom user variables are always assigned a string value.</p>

<p><strong>Note</strong>: Underscore characters in variable names display as spaces inside the field to improve readability.</p>

<h3>Structure of the index.html file</h3>

<p>The <code>index.html</code> contains the code necessary to load the build and should include the following:</p>

<ul>
<li>A <code>&lt;canvas&gt;</code> element. Unity runtime uses the <code>&lt;canvas&gt;</code> element to render the application.</li>
<li>JavaScript code to download the build loader. For example:</li>
</ul>

<pre><code class="lang-js">var buildUrl = "Build";
var loaderUrl = buildUrl + "/{{{ LOADER_FILENAME }}}";
var script = document.createElement("script");
script.src = loaderUrl;
script.onload = () =&gt; {
  // code for instantiating the build
};
document.body.appendChild(script);`
</code></pre>

<p>In this example, <code>{{{ LOADER_FILENAME }}}</code> is automatically resolved by the template preprocessor when the build is generated.</p>

<p>Alternatively, you can download the build loader using a script tag, for example:
<code>lang-js
&lt;script src="Build/{{{ LOADER_FILENAME }}}"&gt;&lt;/script&gt;
</code></p>

<ul>
<li>JavaScript code for instantiating a build. Unity builds are instantiated using the <code>createUnityInstance()</code> function, which is defined in the build loader script.</li>
</ul>

<h2>The instantiation function: createUnityInstance()</h2>

<p>The <code>createUnityInstance()</code> function creates a new instance of your content. You can use it like this:
<code>
createUnityInstance(canvas, config,  onProgress).then(onSuccess).catch(onError);
</code></p>

<p>This function returns a Promise object, where:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">对象</th>
	<th style="text-align:left;">用途</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>canvas</code></td>
	<td style="text-align:left;">Unity runtime uses the <code>canvas</code> object to render the game.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>config</code></td>
	<td style="text-align:left;">The <code>config</code> object contains the build configuration, such as the code and data URLs, product and company name, and version. For more information on config definition, see the <a href="#build_configuration">Build Configuration</a> section on this page.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>onProgress(progress) {...}</code></td>
	<td style="text-align:left;">The WebGL loader calls the <code>onProgress</code> callback object every time the download progress updates. The <code>progress</code> argument that comes with the <code>onProgress</code> callback determines the loading progress as a value between 0.0 and 1.0.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>onSuccess(unityInstance) {...}</code></td>
	<td style="text-align:left;">The <code>onSuccess</code> callback is called after the build has successfully instantiated. The created Unity instance object is provided as an argument. This object can be used for interaction with the build.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>onError(message) {...}</code></td>
	<td style="text-align:left;">The onError callback is called if an error occurs during build instantiation. An error message is provided as an argument.</td>
</tr>
</tbody>
</table>

<p>The <code>createUnityInstance()</code> function is defined in the build loader script and is specific to the instantiated build. Therefore, if you are embedding two or more builds in the same HTML document, make sure that the <code>createUnityInstance()</code> function is called from an <code>onload</code> callback of the corresponding build loader script. For more information about the Unity WebGL Loader, see <a href="webgl_building">Building and Running a WebGL Project</a>.</p>

<h2>Build configuration <a name="build_configuration"></a>
</h2>

<p>The configuration object contains the build configuration, which consists of code and data URLs, product name, company name, and version. You can define it using the following code:</p>

<pre><code class="lang-js">var buildUrl = "Build";
var config = {
  dataUrl: buildUrl + "/{{{ DATA_FILENAME }}}",
  frameworkUrl: buildUrl + "/{{{ FRAMEWORK_FILENAME }}}",
  codeUrl: buildUrl + "/{{{ CODE_FILENAME }}}",
#if MEMORY_FILENAME
  memoryUrl: buildUrl + "/{{{ MEMORY_FILENAME }}}",
#endif
#if SYMBOLS_FILENAME
  symbolsUrl: buildUrl + "/{{{ SYMBOLS_FILENAME }}}",
#endif
  streamingAssetsUrl: "StreamingAssets",
  companyName: "{{{ COMPANY_NAME }}}",
  productName: "{{{ PRODUCT_NAME }}}",
  productVersion: "{{{ PRODUCT_VERSION }}}",
};
</code></pre>

<p>In the example above, the build folder URL is stored as a separate variable called <code>buildUrl</code>. This is useful in cases where you don’t know the relationship between the embedding page and build folder on the hosting server. It enables you to reuse the embedding code in other HTML documents. An example of when to use this is if you move the <code>Build</code> folder to another location on your server. You can adjust the value of the <code>buildUrl</code> variable on the embedding page, and you can use the same embedding code. This also applies to the <code>StreamingAssets</code> folder (<code>streamingAssetsUrl</code>).</p>

<h2>Build interaction</h2>

<p>After the build has successfully instantiated, the fulfilment handler callback of the Promise object receives the newly created Unity instance object as an argument. To interact with the build, call the following methods of the Unity instance:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">方法</th>
	<th style="text-align:left;">用途</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>unityInstance.SetFullscreen(fullscreen)</code></td>
	<td style="text-align:left;">The <code>SetFullscreen</code> method toggles full screen mode. This method does not return a value. <br>- Full screen mode is activated when the <code>fullscreen</code> argument has a value of 1. *Full screen mode is disabled when the <code>fullscreen</code> argument has a value of 0.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>unityInstance.SendMessage(objectName, methodName, value)</code></td>
	<td style="text-align:left;">The SendMessage method sends messages to the GameObjects. This method does not return a value. <br>- <strong>objectName</strong> is the name of an object in your Scene. <br> - <strong>methodName</strong> is the name of a method in the script, currently attached to that object. <br>- <strong>value</strong> can be a string, a number, or it can be empty.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>unityInstance.Quit().then(onQuit)</code></td>
	<td style="text-align:left;">The <code>Quit()</code> method can be used to quit the runtime and clean up the memory used by the Unity instance. This method returns a Promise object.<br> - <strong>onQuit</strong> callback is called after the build runtime has quit.</td>
</tr>
</tbody>
</table>

<hr>

<ul>
<li><p><span class="page-history">5.6 版更新</span></p></li>
<li><p><span class="page-history">在 <a href="https://docs.unity3d.com/2019.1/Documentation/Manual/30_search.html?q=newin20191">2019.1</a>中，WebGL 实例 <code>gameInstance</code> 更名为 <code>unityInstance</code> <span class="search-words">NewIn20191</span></span></p></li>
</ul>
<!-- area:platforms -->
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="webgl-embeddedresources.html"></a></span><div class="tip">WebGL 中的嵌入式资源</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="webgl-cursorfullscreen.html"></a></span><div class="tip">WebGL 中的光标锁定和全屏模式</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">版权所有 © 2020 Unity Technologies. Publication 2020.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
