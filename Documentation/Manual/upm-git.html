<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Git 依赖关系 - Unity 手册">
<title>Git 依赖关系 - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2020.3/uploads/Main/upm-git-cloning.png">
<meta name="description" content="当 Package Manager 从 Git 代码仓库获取包时，会将包添加到项目本地。这使您可以轻松测试未发布的更改，但不能将对包的更改合并到该 Git 代码仓库。要将现有的本地 Git 代码仓库设置为项目中的依赖关系，请改用本地 Git 代码仓库路径。">
<meta property="og:description" content="当 Package Manager 从 Git 代码仓库获取包时，会将包添加到项目本地。这使您可以轻松测试未发布的更改，但不能将对包的更改合并到该 Git 代码仓库。要将现有的本地 Git 代码仓库设置为项目中的依赖关系，请改用本地 Git 代码仓库路径。">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'upm-git';
      if(!page) page = 'index';
      var version = '2020.3';
      var docs_versions = [{version: '2021.1',version_string: '2021.1',supported: true},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: true},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2020.3/Manual/upm-git.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2020.3/Manual/upm-git.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2020.3/Manual/upm-git.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2020.3/Manual/upm-git.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2020.3/Manual/upm-git.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2020.3/Manual/upm-git.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2020.3/Manual/upm-git.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2020.3/Documentation/Manual/upm-git.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2020.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/upm-git.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/upm-git.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/upm-git.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/upm-git.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/upm-git.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/upm-git.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/upm-git.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/upm-git.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/upm-git.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/upm-git.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/upm-git.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/upm-git.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/upm-git.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/upm-git.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/upm-git.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/upm-git.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/upm-git.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2020.3/Documentation/Manual/upm-git.html">English</a></li>
<li><a data-lang="cn" href="/cn/2020.3/Manual/upm-git.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2020.3/Manual/upm-git.html">日本語</a></li>
<li><a data-lang="es" href="/es/2020.3/Manual/upm-git.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2020.3/Manual/upm-git.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2020.3/Manual/upm-git.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2020.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/upm-git.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/upm-git.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/upm-git.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/upm-git.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/upm-git.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/upm-git.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/upm-git.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/upm-git.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/upm-git.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/upm-git.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/upm-git.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/upm-git.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/upm-git.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/upm-git.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/upm-git.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/upm-git.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/upm-git.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity 用户手册 2020.3 (LTS)</a></li>
<li><a href="PackagesList.html">包</a></li>
<li><a href="Packages.html">Unity 的 Package Manager</a></li>
<li><a href="upm-manifestPrj.html">项目清单</a></li>
<li>Git 依赖关系</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="upm-embed.html"></a></span><div class="tip">嵌入式依赖项</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="upm-localpath.html"></a></span><div class="tip">本地文件夹或 tarball 路径</div>
</div>
</div></div>
<h1>Git 依赖关系</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>当 Package Manager 从 Git 代码仓库获取包时，会将包添加到项目本地。这使您可以轻松测试未发布的更改，但不能将对包的更改合并到该 Git 代码仓库。要将现有的本地 Git 代码仓库设置为项目中的依赖关系，请改用<a href="upm-localpath.html">本地 Git 代码仓库路径</a>。</p>

<p>不能在 <a href="upm-manifestPkg.html">package.json</a> 文件中指定 Git 依赖关系，因为 Package Manager 不支持包之间的 Git 依赖关系。它只支持项目的 Git 依赖关系，所以只能在项目的 <a href="upm-manifestPrj.html">manifest.json</a> 文件中声明 Git 依赖关系。</p>

<p><strong>提示</strong>：如果要从代码仓库将 Git 依赖关系更新到特定版本（<a href="#revision">修订版本</a>），请参阅<a href="#git-locks">已锁定的 Git 依赖关系</a>。</p>

<p>此部分包含以下主题：</p>

<ul>
<li><a href="#req">要求</a></li>
<li>
<a href="#syntax">Git URL 和扩展语法</a>

<ul>
<li><a href="#Git-HTTPS">使用 HTTP/HTTPS 协议</a></li>
<li><a href="#Git-SSH">使用 SSH 协议</a></li>
<li><a href="#Git-FILE">使用 FILE 协议</a></li>
<li><a href="#Git-GIT">使用 GIT 协议</a></li>
<li>
<a href="#revision">以特定修订版本为目标</a>

<ul>
<li><a href="#subfolder">在代码仓库的子文件夹中指定包</a></li>
<li><a href="#paths-and-revisions">同时使用路径和修订版本</a></li>
</ul>
</li>
<li><a href="#subfolder">在子文件夹中指定包</a></li>
</ul>
</li>
<li><a href="#git-locks">已锁定的 Git 依赖关系</a></li>
<li><a href="#git-lfs">Git LFS 支持</a></li>
</ul>

<p><br> </p>

<p><a name="req"></a></p>

<h2>要求</h2>

<p>要在项目中使用 Git 依赖关系，请确保您的计算机上安装了 <a href="https://git-scm.com/">Git 客户端</a>（最低版本 2.14.0），并且已将 Git 可执行路径添加到 PATH 系统环境变量中。</p>

<p><strong>警告：</strong>Package Manager 已经过测试，可与 Git 2.14.0 及更高版本配合使用。如果您使用低于 2.14.0 的 Git 版本，Unity 无法保证结果。</p>

<p>如果代码仓库使用 <a href="https://git-lfs.github.com/">Git LFS</a> 来跟踪文件，请确保您的计算机上还安装了 Git LFS 客户端。如果未安装，则 Package Manager <a href="upm-errors.html#git-lfs">无法获取存储在 LFS 服务器上的文件</a>，而是签出 LFS 指针文件，并且不会显示任何错误或警告消息。</p>

<p>可以使用 Package Manager 窗口直接从 Git 代码仓库安装包。有关更多信息，请参阅<a href="upm-ui-giturl.html">从 Git URL 安装</a>。</p>

<p><a name="syntax"></a></p>

<h2>Git URL 和扩展语法</h2>

<p>Package Manager 支持所有 <a href="https://git-scm.com/book/en/v2/Git-on-the-Server-The-Protocols">Git 协议</a>（直接文件路径除外）。要将 Git URL 指定为依赖关系，请添加要使用 Git URL 添加的包名称，而不是版本号或本地文件路径。例如，下面演示了如何使用不同协议指定远程 Git：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "https://github.example.com/myuser/myrepository1.git",
    "com.mycompany.mypackage2": "ssh://git@github.example.com/myuser/myrepository2.git",
    "com.mycompany.mypackage3": "file://localhost/github.example.com/myuser/myrepository3.git",
    "com.mycompany.mypackage4": "git://github.example.com/myuser/myrepository4.git",
    etc.
  }
}
</code></pre>

<p>Package Manager 通过查找代码仓库路径末尾的 <code>.git</code> 文件扩展名，来识别格式为 URL 的依赖关系是 Git URL。一些 Git 代码仓库托管服务不支持具有此扩展名的 URL，而其他服务则强制执行它。因此，如果您使用 <a href="Git-GIT">GIT 协议</a>，或是如果将特殊 <code>git+</code> 前缀添加到 <a href="#Git-HTTPS">HTTP/HTTPS</a>、<a href="#Git-SSH">SSH</a> 或 <a href="#Git-FILE">FILE</a> URL，则 Git 依赖关系语法允许您省略扩展名。</p>

<p><strong>注意：</strong><code>git+</code> 前缀是 <code>manifest.json</code> 文件中的特殊标记，指示依赖关系基于 Git。Package Manager 不会在克隆代码仓库时将它传递给 Git。</p>

<p>有关 Git 支持的 URL 格式的更多信息，请参阅适用于 git <a href="https://git-scm.com/docs/git-clone#_git_urls_a_id_urls_a">clone</a> 命令的文档。有关 Git 使用的各种协议之间的差异概述，请参阅<a href="https://git-scm.com/book/en/v2/Git-on-the-Server-The-Protocols">有关使用协议的 Git 文档</a>。</p>

<p>此外，Git 依赖关系使用一种扩展语法：</p>

<ul>
<li>
<p>如果所需的包不在代码仓库的根目录中，则可以指定代码仓库中放置该包的子文件夹的路径。仅当所需的包不在代码仓库的根目录中时才需要这样做。例如，以下内容中的字符串 <code>?path=/folder1/folder2</code>：</p>

<p><code>"https://github.example.com/myuser/myrepository.git?path=/folder1/folder2"</code>。</p>

<p>有关更多信息，请参阅<a href="#subfolder">在子文件夹中指定包</a>。</p>
</li>
<li>
<p>可以指定 Git 修订版本，它可以是标签、分支名称或是要锁定到的特定提交哈希。这可确保 Package Manager 始终加载准确的修订版本。如果未指定修订版本，则 Package Manager 会在默认分支和最新提交处克隆代码仓库。例如，以下内容中的字符串 <code>#v2.0.0</code>：</p>

<p><code>"https://github.example.com/myuser/myrepository.git#v2.0.0"</code></p>

<p>有关更多信息，请参阅<a href="#revision">以特定修订版本为目标</a>。</p>
</li>
</ul>

<p><a name="Git-HTTPS"></a></p>

<h3>使用 HTTP/HTTPS 协议</h3>

<p>可以使用带有完整 URL 的 HTTPS 协议：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage": "https://github.example.com/myuser/myrepository.git"
  }
}
</code></pre>

<p>如果 Git 服务器不支持 <code>.git</code> 扩展名，则可以添加特殊 <code>git+</code> 前缀（带或不带扩展名）：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "git+https://github.example.com/myuser/myrepository1.git",
    "com.mycompany.mypackage2": "git+https://github.example.com/myuser/myrepository2"
  }
}
</code></pre>

<p><strong>注意</strong>：或者，可以使用 GIT 协议而不是 <code>git+</code> 前缀。有关更多信息，请参阅<a href="#Git-GIT">使用 GIT 协议</a>。</p>

<p>如果代码仓库可公开访问，则 HTTPS 是用于与用户共享 Git URL 的推荐方案，因为可以直接从 Git 代码仓库托管服务网页复制和粘贴 URL。</p>

<figure>
<img src="../uploads/Main/upm-git-cloning.png" alt="从包代码仓库复制 URL">
<figcaption>从包代码仓库复制 URL</figcaption>
</figure>

<p>如果代码仓库不可公开访问，并且您使用的是 HTTPS，则代码仓库服务器无法对您进行身份验证，因为您无法与该服务器交互以提供凭据。在这种情况下，编辑器会通知您身份验证失败。</p>

<p>若要解决这些身份验证问题，可以使用 <a href="https://git-scm.com/docs/gitcredentials">Git 凭据帮助程序</a>提前进行身份验证，或是改为使用 <a href="#Git-SSH">SSH 协议</a>。如果您使用 Git 代码仓库托管服务设置和配置 SSH 密钥对，则 Package Manager 可以代表您对请求进行无缝身份验证。</p>

<p><a name="Git-SSH"></a></p>

<h3>使用 SSH 协议</h3>

<p>可以使用带有完整 URL 的 SSH 协议：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage": "ssh://git@mycompany.github.com/gitproject/com.mycompany.mypackage.git"
  }
}
</code></pre>

<p>如果 Git 服务器不支持 <code>.git</code> 扩展名，则可以添加特殊 <code>git+</code> 前缀（带或不带扩展名）：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "git+ssh://git@github.example.com/myuser/myrepository1.git",
    "com.mycompany.mypackage2": "git+ssh://git@github.example.com/myuser/myrepository2"
  }
}
</code></pre>

<p><strong>注意</strong>：或者，可以使用 GIT 协议而不是 <code>git+</code> 前缀。有关更多信息，请参阅<a href="#Git-GIT">使用 GIT 协议</a>。</p>

<p>还可以使用类似 SCP 的速记，Package Manager 会始终将它识别为 Git 依赖关系：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage": "git@mycompany.github.com:gitproject/com.mycompany.mypackage.git"
  }
}
</code></pre>

<h4>在 Windows 上使用 PuTTY</h4>

<p>当您使用 SSH 进行身份验证时，Git 会使用默认位置的密钥。但是，如果您在 Windows 上使用 <a href="https://www.putty.org/">PuTTY</a> 作为 SSH 客户端，则需要配置 <code>GIT_SSH</code> 环境变量以使其指向 <code>plink.exe</code>。</p>

<h4>使用 SSH 进行身份验证</h4>

<p>如果要使用 SSH 协议，则需要在 Unity 外部设置 SSH 密钥。有关为特定主机设置身份验证的更多信息，请参阅 <a href="https://support.atlassian.com/bitbucket-cloud/docs/set-up-an-ssh-key/">Bitbucket</a>、<a href="https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html">GitLab</a> 和 <a href="https://github.com/settings/tokens">GitHub</a> 的帮助页面。</p>

<p><strong>注意</strong>：如果您使用口令短语对 SSH 密钥进行加密，则 Package Manager 无法获取包，因为它未提供用于在终端或命令行中输入口令短语的方式。在这种情况下，编辑器会通知您身份验证失败。有关使用 <strong>ssh-agent</strong> 进行身份验证的帮助，请参阅<a href="upm-errors.html#ssh-add">适用于 SSH 的解决方案</a>。</p>

<p><a name="Git-FILE"></a></p>

<h3>使用 FILE 协议</h3>

<p>除非格式正确，否则 Package Manager 不会将带有 <code>file:</code> 前缀的 Git URL 识别为 Git 依赖关系。这意味着必须使用 <code>git+file:</code> 协议，或是带有 <code>file:</code> 协议的 <code>.git</code> 后缀：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "git+file://github.example.com/myuser/myrepository1",
    "com.mycompany.mypackage2": "git+file:///github.example.com/myuser/myrepository2",
    "com.mycompany.mypackage3": "file:///github.example.com/myuser/myrepository3.git"
  }
}
</code></pre>

<p><strong>注意</strong>：或者，可以使用 GIT 协议而不是 <code>git+</code> 前缀。有关更多信息，请参阅<a href="#Git-GIT">使用 GIT 协议</a>。</p>

<p>相反，Package Manager 会将任何其他语法解释为<a href="upm-localpath.html">本地路径</a>。</p>

<p><a name="Git-GIT"></a></p>

<h3>使用 GIT 协议</h3>

<p>Package Manager 可识别 <code>git:</code> 协议（带或不带 <code>.git</code> 路径后缀）：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "git://github.example.com/myuser/myrepository1.git",
    "com.mycompany.mypackage2": "git://github.example.com/myuser/myrepository2"
  }
}
</code></pre>

<p>GIT 协议不需要也不支持 <code>git+</code> 前缀。</p>

<p><a name="revision"></a></p>

<h3>定位某个特定修订版本</h3>

<p>若要声明希望 Package Manager 克隆的特定修订版本，请在 URL 末尾添加以数字符号 (<code>#</code>) 作为前缀的修订版本：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "https://github.example.com/myuser/myrepository1.git#revision",
    "com.mycompany.mypackage2": "git+https://github.example.com/myuser/myrepository2#revision"
  }
}
</code></pre>

<p>修订版本可以是任何标签、分支或提交哈希。下表显示有关指定修订版本的示例：</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>语法：</strong></th>
	<th style="text-align:left;"><strong>URL 示例</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">最新默认分支</td>
	<td style="text-align:left;"><code>"https://github.example.com/myuser/myrepository.git"</code></td>
</tr>
<tr>
	<td style="text-align:left;">特定分支</td>
	<td style="text-align:left;"><code>"https://github.example.com/myuser/myrepository.git#my-branch"</code></td>
</tr>
<tr>
	<td style="text-align:left;">特定版本</td>
	<td style="text-align:left;"><code>"https://github.example.com/myuser/myrepository.git#v2.0.0"</code></td>
</tr>
<tr>
	<td style="text-align:left;">提交哈希</td>
	<td style="text-align:left;"><code>"https://github.example.com/myuser/myrepository.git#9e72f9d5a6a3dadc38d813d8399e1b0e86781a49"</code></td>
</tr>
</tbody>
</table>

<p><a name="subfolder"></a></p>

<h4>在代码仓库的子文件夹中指定包</h4>

<p>如果使用 Git URL 语法指定代码仓库，则 Package Manager 假定包必须位于代码仓库的根目录中。但是，某些包并不位于其代码仓库的根级别，某些代码仓库包含多个包。</p>

<p>可以在 Git URL 中使用 <code>path</code> 查询参数向 Package Manager 通知包的位置。指定的路径必须相对于代码仓库的根目录，并且指定的子文件夹必须包含包清单（<code>package.json</code> 文件）。</p>

<p>若要为 Git 依赖关系指定代码仓库子文件夹，请使用 <code>path</code> 查询参数：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage": "https://github.example.com/myuser/myrepository.git?path=/subfolder"
  }
}
</code></pre>

<p>在这种情况下，Package Manager 仅注册位于指定代码仓库子文件夹中的包，而忽略代码仓库的其余部分。</p>

<p>有时一个代码仓库包含多个相关包。如果要从同一个代码仓库添加多个包，则必须向项目清单添加两个单独的条目：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "https://github.example.com/myuser/myrepository.git?path=/subfolder1",
    "com.mycompany.mypackage3": "https://github.example.com/myuser/myrepository.git?path=/subfolder2/subfolder3"
  }
}
</code></pre>

<p><strong>注意</strong>：如果多次指定同一个代码仓库，则 Package Manager 会多次克隆同一个代码仓库，这会导致性能下降和额外的网络使用。</p>

<p><a name="paths-and-revisions"></a></p>

<h4>同时使用路径和修订版本</h4>

<p><code>path</code> 查询参数始终位于修订版本锚点之前。相反顺序会失败。下面是要使用的正确顺序的示例：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage": "https://github.example.com/myuser/myrepository.git?path=/example/folder#v1.2.3"
  }
}
</code></pre>

<p><a name="git-locks"></a></p>

<h2>已锁定的 Git 依赖关系</h2>

<p>Package Manager 的核心原则之一是确定性。如果您与其他用户共享项目，则 Package Manager 应安装相同的包依赖关系和版本集，其中包括它从 Git 获取的包。为了实现此目标，Package Manager 会使用<a href="upm-conflicts-auto.html">锁定文件</a>，该文件跟踪使用的 Git 依赖关系的提交哈希。</p>

<p>添加修订版本设置为分支或标签的 Git 依赖关系时，Package Manager 会获取相应的提交哈希以存储在锁定文件中。随着时间推移，分支和标签可以指向 Git 代码仓库上的不同提交。例如，一个分支可以添加更新的提交。</p>

<p>若要将包更新到分支或标签指向的不同提交，请使用 <a href="upm-ui-giturl.html">Add package from git URL</a> 按钮并输入 Git URL。可以使用相同的 Git URL，因为 Package Manager 会在提交新请求时忽略已锁定的提交哈希。还可以指定一个新的修订号、标签或分支作为<a href="#revision">修订版本</a>。</p>

<p>或者，可以使用带有该 Git URL 的 <a href="../ScriptReference/PackageManager.Client.Add.html">Client.Add</a> C# API 方法创建脚本。</p>

<p><br> </p>

<p><a name="git-lfs"></a></p>

<h2>Git LFS 支持</h2>

<p>Package Manager 使用 Git LFS 支持与代码仓库的 Git 依赖关系。由于 Git LFS 旨在以最少的配置开销工作，因此它同时支持 HTTPS 和 SSH <a href="#authentication">身份验证</a>。如果用户需要进行身份验证并且没有有权访问远程代码仓库的有效凭据，则获取存储在 LFS 服务器上的文件会失败。</p>

<p>包作者可以通过在代码仓库中的 <code>.lfsconfig</code> 配置文件中提供 URL 来帮助 Git LFS 客户端定位 LFS 服务器。有两种方式可以做到这一点：</p>

<pre><code class="lang-json"># Option 1: global setting
[lfs]
  url = ssh://git@HOSTNAME/path/to/repo.git

# Option 2: per-remote setting
[remote "origin"]
  lfsurl = ssh://git@HOSTNAME/path/to/repo.git
</code></pre>

<p>如果代码仓库包含 <code>.lfsconfig</code> 文件，请确保将它包含在 <code>.npmignore</code> 文件中，以避免将它包含在包的已发布版本中。</p>

<p><br> </p>

<hr>

<p><br> </p>

<ul>
<li><span class="page-history">在 Unity <a href="https://docs.unity3d.com/2019.4/Documentation/Manual/30_search.html?q=newin20194">2019.4</a> 中添加了锁定文件 <span class="search-words">NewIn20194</span></span></li>
<li><span class="page-history">在 Unity <a href="https://docs.unity3d.com/2019.4/Documentation/Manual/30_search.html?q=newin20194">2019.4</a> 中添加了子文件夹中的 Git 依赖关系 <span class="search-words">NewIn20194</span></span></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="upm-embed.html"></a></span><div class="tip">嵌入式依赖项</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="upm-localpath.html"></a></span><div class="tip">本地文件夹或 tarball 路径</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2021 Unity Technologies. Publication 2020.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
